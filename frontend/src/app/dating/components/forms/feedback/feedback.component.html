<h1 mat-dialog-title>
  <button mat-icon-button class="mat-cancel" (click)="back()">
    <mat-icon>arrow_backward</mat-icon>
  </button>
  &nbsp;
  <button
    mat-icon-button
    class="mat-close"
    [style.background-color]="formGroup.valid ? 'yellowgreen' : '#f44336'"
    (click)="onClick()"
  >
    <mat-icon>done</mat-icon>
  </button>
</h1>
<mat-progress-bar
  [mode]="progress.mode"
  [value]="progress.value"
  [color]="progress.color"
></mat-progress-bar>
<div mat-dialog-content class="mat-form">
  <form default [formGroup]="formGroup">
    <mat-accordion>
      <mat-expansion-panel formGroupName="data">
        <mat-expansion-panel-header
          [style.background-color]="
            formGroup.controls.data.valid ? 'yellowgreen' : '#f44336'
          "
        >
          <mat-panel-title>Feedback</mat-panel-title>
        </mat-expansion-panel-header>
        <fieldset>
          <legend>Rate</legend>
          <div legend-right>{{ data.rate }}</div>
          <mat-slider
            min="0"
            max="9"
          >
          <input [formControlName]="'rate'" (input)="onRate($event)" matSliderThumb>
        </mat-slider>
        </fieldset>
        <fieldset>
          <legend>Description (min. 10, max. 160)</legend>
          <div legend-right>
            {{ formGroup.controls.data.get('desc').value.length }}
          </div>
          <mat-form-field>
            <textarea
              matInput
              [formControlName]="'desc'"
              rows="5"
              maxlength="160"
            ></textarea>
            <mat-error *ngIf="formGroup.controls.data.get('desc').invalid"
              >Description is required!</mat-error
            >
          </mat-form-field>
        </fieldset>
      </mat-expansion-panel>
    </mat-accordion>
  </form>
</div>
