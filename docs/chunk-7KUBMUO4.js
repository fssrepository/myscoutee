import{Db as M,Ga as I,Ka as f,Qa as x,Wa as l,Wb as O,Xa as i,Xb as k,Y as p,Ya as o,Z as u,Zb as y,db as _,fb as m,hb as g,hc as S,ic as w,jc as T,sb as P,ta as v,tb as C,va as d,vb as c,wb as h,yb as b}from"./chunk-4EMYYHCC.js";function H(r,e){if(r&1){let n=_();i(0,"button",19),m("click",function(){let a=p(n).index,s=g(2);return u(s.selectCandidateImage(a))}),o()}if(r&2){let n=e.index,t=g(2);C("active",n===t.selectedCandidateImageIndex)}}function E(r,e){if(r&1&&(i(0,"div",17),f(1,H,1,2,"button",18),o()),r&2){let n=g();d(),l("ngForOf",n.candidateImageStack)}}function U(r,e){if(r&1){let n=_();i(0,"button",22),m("click",function(){let a=p(n).index,s=g(2);return u(s.selectCandidateImage(a))}),o()}}function Y(r,e){if(r&1&&(i(0,"div",20),f(1,U,1,0,"button",21),o()),r&2){let n=g();d(),l("ngForOf",n.candidateImageStack)}}function z(r,e){if(r&1&&(i(0,"span",23),c(1),o()),r&2){let n=g();d(),h(n.candidateInitials)}}function X(r,e){if(r&1){let n=_();i(0,"button",24),m("click",function(){let a=p(n).$implicit,s=g();return u(s.setRating(a))}),c(1," \u2605 "),o()}if(r&2){let n=e.$implicit,t=g();C("filled",n<=t.selectedRating),x("aria-label",M("Rate ",n))}}function F(r,e){if(r&1){let n=_();i(0,"section",25)(1,"div",26),m("click",function(){p(n);let a=g();return u(a.closeLocalPopup())}),o(),i(2,"div",27),m("click",function(a){return p(n),u(a.stopPropagation())}),i(3,"header")(4,"h2"),c(5,"Profile Filter"),o(),i(6,"button",28),m("click",function(){p(n);let a=g();return u(a.closeLocalPopup())}),c(7,"\xD7"),o()(),i(8,"div",29)(9,"p"),c(10,"Filters: profession, school, friends in common."),o(),i(11,"p"),c(12,"Mode: single/pair, distance and recent activity."),o()()()()}}var D=class r{users=T;selectedRating=7;isPairMode=!1;cardIndex=0;selectedCandidateImageIndex=0;candidateImageZoom=1;candidateImagePanX=0;candidateImagePanY=0;localPopup=null;activeUserId=this.getActiveUserId();isCandidateImageDragging=!1;candidateDragOffsetX=0;candidateDragOffsetY=0;activeTouchId=null;get activeUser(){return this.users.find(e=>e.id===this.activeUserId)??this.users[0]}get candidatePool(){return this.users.filter(e=>e.id!==this.activeUserId)}get activeCandidate(){let e=this.candidatePool;return e[this.cardIndex%e.length]}get ratingScale(){return Array.from({length:10},(e,n)=>n+1)}setRating(e){this.selectedRating=e;let n=this.cardIndex+1;this.cardIndex=n%this.candidatePool.length,this.resetCandidateImageState()}togglePairMode(){this.isPairMode=!this.isPairMode}openHistory(){this.localPopup="history"}closeLocalPopup(){this.localPopup=null}openFilter(){this.localPopup="history"}get candidateImageStack(){let e=(this.activeCandidate.images??[]).filter(Boolean);if(e.length>0)return e;let n=`assets/profile/${this.activeCandidate.id}`;return["a","b","c"].map(t=>`${n}-${t}.svg`)}get candidateImage(){if(this.candidateImageStack.length===0)return null;let e=Math.min(this.selectedCandidateImageIndex,this.candidateImageStack.length-1);return this.candidateImageStack[e]??null}selectCandidateImage(e){e<0||e>=this.candidateImageStack.length||(this.selectedCandidateImageIndex=e,this.candidateImageZoom=1,this.candidateImagePanX=0,this.candidateImagePanY=0,this.isCandidateImageDragging=!1)}onCandidateImageWheel(e){if(!this.candidateImage)return;e.preventDefault();let n=e.deltaY<0?.12:-.12;this.candidateImageZoom=this.clamp(this.candidateImageZoom+n,1,3.5),this.clampCandidateImagePan()}onCandidateImageMouseDown(e){this.candidateImageZoom<=1||(this.isCandidateImageDragging=!0,this.candidateDragOffsetX=e.clientX-this.candidateImagePanX,this.candidateDragOffsetY=e.clientY-this.candidateImagePanY)}onCandidateImageMouseMove(e){this.isCandidateImageDragging&&(this.candidateImagePanX=e.clientX-this.candidateDragOffsetX,this.candidateImagePanY=e.clientY-this.candidateDragOffsetY,this.clampCandidateImagePan())}onCandidateImageMouseUp(){this.isCandidateImageDragging=!1}onCandidateImageTouchStart(e){if(this.candidateImageZoom<=1||e.touches.length===0)return;let n=e.touches[0];this.activeTouchId=n.identifier,this.isCandidateImageDragging=!0,this.candidateDragOffsetX=n.clientX-this.candidateImagePanX,this.candidateDragOffsetY=n.clientY-this.candidateImagePanY}onCandidateImageTouchMove(e){if(!this.isCandidateImageDragging||this.activeTouchId===null)return;let n=Array.from(e.touches).find(t=>t.identifier===this.activeTouchId);n&&(e.preventDefault(),this.candidateImagePanX=n.clientX-this.candidateDragOffsetX,this.candidateImagePanY=n.clientY-this.candidateDragOffsetY,this.clampCandidateImagePan())}onCandidateImageTouchEnd(){this.isCandidateImageDragging=!1,this.activeTouchId=null}get candidateInitials(){let e=this.activeCandidate.name.split(" ").filter(Boolean);return e.length===0?"U":e.length===1?e[0].slice(0,2).toUpperCase():`${e[0][0]}${e[1][0]}`.toUpperCase()}onActiveUserChanged(){this.activeUserId=this.getActiveUserId(),this.cardIndex=0,this.resetCandidateImageState()}getActiveUserId(){let e=localStorage.getItem("demo-active-user");return e?this.users.some(n=>n.id===e)?e:this.users[0].id:this.users[0].id}clampCandidateImagePan(){let e=(this.candidateImageZoom-1)*140;this.candidateImagePanX=this.clamp(this.candidateImagePanX,-e,e),this.candidateImagePanY=this.clamp(this.candidateImagePanY,-e,e)}clamp(e,n,t){return Math.min(t,Math.max(n,e))}resetCandidateImageState(){this.selectedCandidateImageIndex=0,this.candidateImageZoom=1,this.candidateImagePanX=0,this.candidateImagePanY=0,this.isCandidateImageDragging=!1,this.activeTouchId=null}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=I({type:r,selectors:[["app-home"]],hostBindings:function(n,t){n&1&&m("active-user-changed",function(){return t.onActiveUserChanged()},v)},decls:36,vars:23,consts:[[1,"game-page"],[1,"game-header"],[1,"game-actions"],["type","button",1,"game-action-mode",3,"click"],["type","button","aria-label","Open profile filters",1,"game-action-filter","has-badge",3,"click"],[1,"history-badge"],[1,"game-layout-single"],[1,"card-stack","game-card-main"],[1,"card-content"],["class","game-image-stack-indicators",4,"ngIf"],[1,"card-image-area"],[1,"card-image-content",3,"wheel","mousedown","mousemove","mouseup","mouseleave","touchstart","touchmove","touchend","touchcancel"],["class","game-image-hit-area",4,"ngIf"],["class","card-image-placeholder",4,"ngIf"],[1,"rating-stars"],["type","button","class","star-btn",3,"filled","aria-label","click",4,"ngFor","ngForOf"],["class","game-popup",4,"ngIf"],[1,"game-image-stack-indicators"],["type","button","class","game-image-stack-line","aria-label","Select profile image",3,"active","click",4,"ngFor","ngForOf"],["type","button","aria-label","Select profile image",1,"game-image-stack-line",3,"click"],[1,"game-image-hit-area"],["type","button","class","game-image-hit-segment","aria-label","Select profile image",3,"click",4,"ngFor","ngForOf"],["type","button","aria-label","Select profile image",1,"game-image-hit-segment",3,"click"],[1,"card-image-placeholder"],["type","button",1,"star-btn",3,"click","aria-label"],[1,"game-popup"],[1,"game-popup-backdrop",3,"click"],[1,"game-popup-panel",3,"click"],["type","button",3,"click"],[1,"game-popup-body"]],template:function(n,t){n&1&&(i(0,"div",0)(1,"header",1)(2,"div")(3,"h1"),c(4,"Myscoutee"),o()(),i(5,"div",2)(6,"button",3),m("click",function(){return t.togglePairMode()}),i(7,"mat-icon"),c(8),o(),i(9,"span"),c(10),o()(),i(11,"button",4),m("click",function(){return t.openFilter()}),i(12,"mat-icon"),c(13,"filter_alt"),o()(),i(14,"button",4),m("click",function(){return t.openFilter()}),i(15,"mat-icon"),c(16,"history"),o(),i(17,"span",5),c(18),o()()()(),i(19,"section",6)(20,"article",7)(21,"div",8)(22,"h2"),c(23),o(),i(24,"p"),c(25),o(),i(26,"p"),c(27),o()(),f(28,E,2,1,"div",9),i(29,"div",10)(30,"div",11),m("wheel",function(s){return t.onCandidateImageWheel(s)})("mousedown",function(s){return t.onCandidateImageMouseDown(s)})("mousemove",function(s){return t.onCandidateImageMouseMove(s)})("mouseup",function(){return t.onCandidateImageMouseUp()})("mouseleave",function(){return t.onCandidateImageMouseUp()})("touchstart",function(s){return t.onCandidateImageTouchStart(s)})("touchmove",function(s){return t.onCandidateImageTouchMove(s)})("touchend",function(){return t.onCandidateImageTouchEnd()})("touchcancel",function(){return t.onCandidateImageTouchEnd()}),f(31,Y,2,1,"div",12)(32,z,2,1,"span",13),o()(),i(33,"div",14),f(34,X,2,4,"button",15),o()()()(),f(35,F,13,0,"section",16)),n&2&&(d(6),C("mode-pair",t.isPairMode)("mode-single",!t.isPairMode),d(2),h(t.isPairMode?"groups":"person"),d(2),h(t.isPairMode?"Pair mode":"Single mode"),d(8),h(t.activeUser.activities.game),d(5),b("",t.activeCandidate.name,", ",t.activeCandidate.age),d(2),b("",t.activeCandidate.city," \xB7 ",t.activeCandidate.statusText),d(2),h(t.activeCandidate.headline),d(),l("ngIf",t.candidateImageStack.length>1),d(2),P("background-image",t.candidateImage?"url("+t.candidateImage+")":"none")("transform","translate("+t.candidateImagePanX+"px,"+t.candidateImagePanY+"px) scale("+t.candidateImageZoom+")"),C("is-draggable",t.candidateImageZoom>1),d(),l("ngIf",t.candidateImageStack.length>1),d(),l("ngIf",!t.candidateImage),d(2),l("ngForOf",t.ratingScale),d(),l("ngIf",t.localPopup==="history"))},dependencies:[y,O,k,w,S],styles:["[_nghost-%COMP%]{display:block}.game-page[_ngcontent-%COMP%]{max-width:980px;margin:0 auto;min-height:calc(100vh - 3rem);border:1px solid rgba(21,38,62,.14);border-radius:16px;padding:.74rem;background:radial-gradient(circle at 0% 0%,rgba(29,98,160,.12),transparent 34%),radial-gradient(circle at 100% 0%,rgba(193,87,48,.12),transparent 32%),#f8fbff}.game-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:.72rem}.game-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:#1f2d44;font-size:1.32rem}.game-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.22rem 0 0;color:#142135b8;font-size:.84rem}.game-actions[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.38rem}.game-action-icon[_ngcontent-%COMP%], .game-action-mode[_ngcontent-%COMP%]{border:1px solid rgba(22,38,60,.2);border-radius:999px;background:#fff;color:#1f2d44;font:inherit;cursor:pointer;display:inline-flex;align-items:center;justify-content:center}.game-action-icon[_ngcontent-%COMP%]{width:38px;height:38px;position:relative}.game-action-icon[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px;line-height:18px}.game-action-mode[_ngcontent-%COMP%]{height:38px;padding:0 .72rem;gap:.34rem;font-size:.82rem;font-weight:700}.game-action-mode[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:17px;height:17px;font-size:17px;line-height:17px}.game-action-mode.mode-single[_ngcontent-%COMP%]{background:linear-gradient(180deg,#edf6ff,#e2effd);border-color:#2f67b457;color:#1e569d}.game-action-mode.mode-pair[_ngcontent-%COMP%]{background:linear-gradient(180deg,#f2eefc,#e8e2f9);border-color:#644ea357;color:#4d3d8b}.game-action-filter[_ngcontent-%COMP%]{height:38px;padding:0 .78rem;gap:.32rem;border-radius:999px;border:1px solid rgba(34,96,176,.42);background:linear-gradient(180deg,#4f8fdf,#3e79c4);color:#fff;font:inherit;font-size:.8rem;font-weight:700;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;position:relative}.game-action-filter[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:16px;height:16px;font-size:16px;line-height:16px}.history-badge[_ngcontent-%COMP%]{position:absolute;top:-6px;right:-6px;min-width:20px;height:20px;border-radius:50%;background:#d94a4a;color:#fff;font-size:11px;font-weight:700;display:inline-flex;align-items:center;justify-content:center;box-shadow:0 0 0 2px #fff}.game-layout-single[_ngcontent-%COMP%]{margin-top:.68rem}.game-card-main[_ngcontent-%COMP%]{border:1px solid rgba(21,38,62,.14);border-radius:14px;background:#fff;overflow:hidden}.card-content[_ngcontent-%COMP%]{padding:.7rem .76rem .44rem}.card-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;color:#1f2d44}.card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.26rem 0 0;color:#15243abd;font-size:.84rem}.card-image-area[_ngcontent-%COMP%]{margin:0 .72rem;border-radius:12px;border:1px dashed rgba(19,34,55,.2);min-height:calc(100vh - 15.5rem);background:linear-gradient(155deg,#dbeaffa8,#fff1e68a),#f8fbff;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden}.card-image-content[_ngcontent-%COMP%]{width:100%;min-height:inherit;height:100%;background-position:center;background-size:cover;background-repeat:no-repeat;display:flex;align-items:center;justify-content:center;transform-origin:center;transition:transform .14s ease-out;cursor:default;position:relative;touch-action:none}.card-image-content.is-draggable[_ngcontent-%COMP%]{cursor:grab}.card-image-content.is-draggable[_ngcontent-%COMP%]:active{cursor:grabbing}.game-image-stack-indicators[_ngcontent-%COMP%]{margin:0 .72rem .42rem;display:grid;grid-template-columns:repeat(auto-fit,minmax(0,1fr));gap:4px}.game-image-stack-line[_ngcontent-%COMP%]{border:0;height:3px;border-radius:999px;background:#314e753d;cursor:pointer;padding:0}.game-image-stack-line.active[_ngcontent-%COMP%]{background:#2b61aac7}.game-image-hit-area[_ngcontent-%COMP%]{position:absolute;inset:10px;display:grid;grid-template-columns:repeat(auto-fit,minmax(0,1fr));gap:4px;z-index:2}.game-image-hit-segment[_ngcontent-%COMP%]{border:0;background:transparent;padding:0;cursor:pointer}.card-image-placeholder[_ngcontent-%COMP%]{width:84px;height:84px;border-radius:50%;background:linear-gradient(145deg,#d3754c,#ac4a24);color:#fff;font-weight:800;font-size:1.72rem;display:inline-flex;align-items:center;justify-content:center;letter-spacing:.03em}.rating-stars[_ngcontent-%COMP%]{margin:.56rem .72rem .72rem;display:grid;grid-template-columns:repeat(10,minmax(0,1fr));gap:.32rem}.star-btn[_ngcontent-%COMP%]{width:100%;min-width:0;min-height:34px;border-radius:999px;border:1px solid rgba(22,40,64,.22);background:#fff;color:#606f85e6;font-size:1.04rem;line-height:1;cursor:pointer}.star-btn.filled[_ngcontent-%COMP%]{color:#f2ba31;border-color:#c1912270;background:linear-gradient(180deg,#fff9e9,#fff2d0)}.game-popup[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:2200;display:flex;align-items:center;justify-content:center;padding:1rem}.game-popup-backdrop[_ngcontent-%COMP%]{position:absolute;inset:0;background:#00000070}.game-popup-panel[_ngcontent-%COMP%]{position:relative;z-index:1;width:min(680px,100vw - 1rem);border-radius:12px;background:#fff;border:1px solid rgba(15,23,42,.14);overflow:hidden}.game-popup-panel[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{padding:.58rem .72rem;border-bottom:1px solid rgba(15,23,42,.1);display:flex;justify-content:space-between;align-items:center}.game-popup-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1rem}.game-popup-panel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:1px solid rgba(15,23,42,.2);border-radius:999px;background:#fff;color:#1f2d44;font:inherit;font-size:.8rem;padding:.28rem .64rem;cursor:pointer}.game-popup-body[_ngcontent-%COMP%]{padding:.75rem;display:grid;gap:.45rem}.game-popup-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#0f172ab8}@media(max-width:760px){.game-page[_ngcontent-%COMP%]{min-height:auto;border-radius:14px;padding:.64rem}.game-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.game-actions[_ngcontent-%COMP%]{justify-content:flex-end}.card-image-area[_ngcontent-%COMP%]{min-height:calc(100vh - 20.5rem)}.rating-stars[_ngcontent-%COMP%]{grid-template-columns:repeat(5,minmax(0,1fr))}}"],changeDetection:0})};export{D as HomeComponent};
