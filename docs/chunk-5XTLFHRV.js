import{a as y}from"./chunk-PRH5WFWB.js";import{$b as n,Ab as e,Bb as t,Cb as h,Jb as _,Lb as c,Nb as m,Nc as v,Oc as M,Ra as C,Sc as O,Ta as d,ac as g,bc as P,cc as b,ea as l,fa as s,gb as x,kb as u,zb as f}from"./chunk-A2PFJD3Q.js";function k(p,i){if(p&1){let o=_();e(0,"button",3),c("click",function(){let a=l(o).$implicit,E=m();return s(E.setRating(a))}),n(1),t()}if(p&2){let o=i.$implicit;d(),g(o)}}function S(p,i){if(p&1){let o=_();e(0,"section",17)(1,"div",18),c("click",function(){l(o);let a=m();return s(a.closeLocalPopup())}),t(),e(2,"div",19),c("click",function(a){return l(o),s(a.stopPropagation())}),e(3,"header")(4,"h2"),n(5,"Vote History"),t(),e(6,"button",3),c("click",function(){l(o);let a=m();return s(a.closeLocalPopup())}),n(7,"\xD7"),t()(),e(8,"div",20)(9,"p"),n(10,"Filters: Given \xB7 Received \xB7 Mutual \xB7 Met \xB7 Pairs"),t(),e(11,"p"),n(12,"Additional filters: distance, activity time, name search."),t()()()()}}var w=class p{users=y;selectedRating=7;cardIndex=0;localPopup=null;activeUserId=this.getActiveUserId();get activeUser(){return this.users.find(i=>i.id===this.activeUserId)??this.users[0]}get candidatePool(){return this.users.filter(i=>i.id!==this.activeUserId)}get activeCandidate(){let i=this.candidatePool;return i[this.cardIndex%i.length]}get ratingScale(){return Array.from({length:10},(i,o)=>o+1)}setRating(i){this.selectedRating=i;let o=this.cardIndex+1;this.cardIndex=o%this.candidatePool.length}openHistory(){this.localPopup="history"}closeLocalPopup(){this.localPopup=null}requestGlobalPopup(i){window.dispatchEvent(new CustomEvent("openFeaturePopup",{detail:{type:i}}))}onActiveUserChanged(){this.activeUserId=this.getActiveUserId(),this.cardIndex=0}getActiveUserId(){let i=localStorage.getItem("demo-active-user");return i?this.users.some(o=>o.id===i)?i:this.users[0].id:this.users[0].id}static \u0275fac=function(o){return new(o||p)};static \u0275cmp=x({type:p,selectors:[["app-home"]],hostBindings:function(o,r){o&1&&c("active-user-changed",function(){return r.onActiveUserChanged()},C)},decls:50,vars:9,consts:[[1,"game-page"],[1,"game-header"],[1,"game-actions"],["type","button",3,"click"],[1,"game-filter-bar"],[1,"game-layout"],[1,"card-stack"],[1,"image-progress"],[1,"card-content"],[1,"rating-bar"],[1,"rating-value"],["type","button",3,"click",4,"ngFor","ngForOf"],[1,"pair-card"],[1,"pair-row"],[1,"pill","woman"],[1,"pill","man"],["class","game-popup",4,"ngIf"],[1,"game-popup"],[1,"game-popup-backdrop",3,"click"],[1,"game-popup-panel",3,"click"],[1,"game-popup-body"]],template:function(o,r){o&1&&(e(0,"div",0)(1,"header",1)(2,"div")(3,"h1"),n(4,"Game"),t(),e(5,"p"),n(6,"Default route. All other menu sections open as popup above this page."),t()(),e(7,"div",2)(8,"button",3),c("click",function(){return r.openHistory()}),n(9,"History"),t(),e(10,"button",3),c("click",function(){return r.requestGlobalPopup("eventEditor")}),n(11,"Event Editor"),t(),e(12,"button",3),c("click",function(){return r.requestGlobalPopup("eventExplore")}),n(13,"Event Explore"),t()()(),e(14,"section",4)(15,"span"),n(16,"Profile filter: profession + school + friends in common"),t(),e(17,"span"),n(18,"Type: single / pair"),t(),e(19,"span"),n(20),t()(),e(21,"section",5)(22,"article",6)(23,"div",7),h(24,"span")(25,"span")(26,"span")(27,"span"),t(),e(28,"div",8)(29,"h2"),n(30),t(),e(31,"p"),n(32),t(),e(33,"p"),n(34),t()(),e(35,"div",9)(36,"span",10),n(37),t(),u(38,k,2,1,"button",11),t()(),e(39,"aside",12)(40,"h3"),n(41,"Pair mode preview"),t(),e(42,"p"),n(43,"Rotate in pair mode to compare two candidates side-by-side."),t(),e(44,"div",13)(45,"span",14),n(46,"Woman lane"),t(),e(47,"span",15),n(48,"Man lane"),t()()()()(),u(49,S,13,0,"section",16)),o&2&&(d(20),P("Interaction counter: ",r.activeUser.activities.game),d(10),b("",r.activeCandidate.name,", ",r.activeCandidate.age),d(2),b("",r.activeCandidate.city," \xB7 ",r.activeCandidate.statusText),d(2),g(r.activeCandidate.headline),d(3),g(r.selectedRating),d(),f("ngForOf",r.ratingScale),d(11),f("ngIf",r.localPopup==="history"))},dependencies:[O,v,M],styles:["[_nghost-%COMP%]{display:block}.game-page[_ngcontent-%COMP%]{max-width:980px;margin:0 auto;border:1px solid rgba(15,23,42,.1);border-radius:18px;padding:.85rem;background:radial-gradient(circle at 0% 0%,rgba(29,98,160,.18),transparent 32%),radial-gradient(circle at 100% 0%,rgba(193,87,48,.16),transparent 28%),#f8fbff}.game-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:.8rem}.game-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:#1f2d44;font-size:1.34rem}.game-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.28rem 0 0;color:#0f172ab8;font-size:.88rem}.game-actions[_ngcontent-%COMP%]{display:flex;gap:.35rem;flex-wrap:wrap}.game-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .rating-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .game-popup-panel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:1px solid rgba(15,23,42,.2);border-radius:999px;background:#fff;color:#1f2d44;font:inherit;font-size:.8rem;padding:.34rem .72rem;cursor:pointer}.game-filter-bar[_ngcontent-%COMP%]{margin-top:.72rem;display:flex;flex-wrap:wrap;gap:.35rem}.game-filter-bar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border:1px solid rgba(15,23,42,.15);border-radius:999px;background:#fff;padding:.16rem .46rem;font-size:.75rem;color:#0f172ad1}.game-layout[_ngcontent-%COMP%]{margin-top:.8rem;display:grid;grid-template-columns:2fr 1fr;gap:.65rem}.card-stack[_ngcontent-%COMP%]{border:1px solid rgba(15,23,42,.12);border-radius:14px;background:#fff;overflow:hidden}.image-progress[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:.2rem;padding:.4rem}.image-progress[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:4px;border-radius:999px;background:#0f172a33}.card-content[_ngcontent-%COMP%]{padding:.7rem}.card-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.08rem;color:#1f2d44}.card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.3rem 0 0;color:#0f172aba;font-size:.85rem}.rating-bar[_ngcontent-%COMP%]{border-top:1px dashed rgba(15,23,42,.2);padding:.62rem;display:grid;grid-template-columns:auto repeat(10,minmax(0,1fr));gap:.25rem}.rating-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:10px;min-height:25px;padding:0;font-size:.73rem}.rating-value[_ngcontent-%COMP%]{width:34px;height:34px;border-radius:50%;background:linear-gradient(140deg,#f29f53,#ce631f);color:#fff;font-weight:700;display:inline-flex;align-items:center;justify-content:center}.pair-card[_ngcontent-%COMP%]{border:1px solid rgba(15,23,42,.12);border-radius:14px;background:#fff;padding:.65rem}.pair-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:.92rem;color:#1f2d44}.pair-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.35rem 0 0;font-size:.82rem;color:#0f172ab8}.pair-row[_ngcontent-%COMP%]{margin-top:.6rem;display:flex;flex-direction:column;gap:.32rem}.pill[_ngcontent-%COMP%]{border:1px solid rgba(15,23,42,.15);border-radius:999px;padding:.24rem .5rem;font-size:.75rem;font-weight:600}.pill.woman[_ngcontent-%COMP%]{background:#cb593c1f;color:#8a2f18}.pill.man[_ngcontent-%COMP%]{background:#256ba31f;color:#114770}.game-popup[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:2200;display:flex;align-items:center;justify-content:center;padding:1rem}.game-popup-backdrop[_ngcontent-%COMP%]{position:absolute;inset:0;background:#00000070}.game-popup-panel[_ngcontent-%COMP%]{position:relative;z-index:1;width:min(680px,100vw - 1rem);border-radius:12px;background:#fff;border:1px solid rgba(15,23,42,.14);overflow:hidden}.game-popup-panel[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{padding:.58rem .72rem;border-bottom:1px solid rgba(15,23,42,.1);display:flex;justify-content:space-between;align-items:center}.game-popup-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1rem}.game-popup-body[_ngcontent-%COMP%]{padding:.75rem;display:grid;gap:.45rem}.game-popup-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#0f172ab8}@media(max-width:860px){.game-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media(max-width:640px){.game-page[_ngcontent-%COMP%]{padding:.65rem;border-radius:14px}.game-header[_ngcontent-%COMP%]{flex-direction:column}.rating-bar[_ngcontent-%COMP%]{grid-template-columns:auto repeat(5,minmax(0,1fr))}}"],changeDetection:0})};export{w as HomeComponent};
