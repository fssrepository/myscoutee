"use strict";(self.webpackChunkmyscoutee=self.webpackChunkmyscoutee||[]).push([[162],{162:(kt,F,m)=>{m.r(F),m.d(F,{DatingModule:()=>Tt});var f=m(6814),d=m(6223),V=m(9497),x=m(4408),u=m(2044);m(2156);var v=m(9862),t=m(5879),p=m(9347),w=m(2848),C=m(1269),B=m(6906),y=m(617),_=m(2296),b=m(6007);const j=["panel"];function Y(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",5),t.NdJ("click",function(){const n=t.CHM(e).index,l=t.oxw();return t.KtG(l.doAction(n))}),t.TgZ(1,"mat-icon"),t._uU(2),t.qZA()()}if(2&i){const e=r.$implicit;t.Q6J("color",e.color?e.color:"primary"),t.xp6(2),t.Oqu(e.icon)}}const H=t.zs3.create({providers:[{provide:u.D_,deps:[]}]});let L=(()=>{class i{constructor(e,o,a,n,l,s){this.cfr=e,this.activatedRoute=o,this.dialog=a,this.dataService=n,this.httpService=l,this.transformService=s,this.progress={mode:"determine",value:100,color:"primary"};let c=this.activatedRoute._routerState.snapshot.url;this.itemUrl=c,c=c.substring(1),this.url=c.substring(c.indexOf("/")),this.progress.mode="indeterminate",this.httpService.get(this.url).subscribe({next:g=>{this.value=g;const k=this.cfr.resolveComponentFactory(u.D_).create(H);let O;"P"!==this.value.profile.status&&(O=this.transformService.transform(g,this.itemUrl)),k.instance.onEnter("",O),k.instance.show(!0,!0),this.panelRef.insert(k.hostView),this.comp=k},error:g=>{this.progress.mode="determine",this.progress.color="warn"},complete:()=>{this.progress.mode="determine"}})}doAction(e){if("share"===this.actions[e].type){const o=new v.LE;this.httpService.get(this.url+"/share",o).subscribe({next:a=>{navigator.share?navigator.share({title:a.info.title,text:a.info.msg,url:location.origin+"?xlink="+a.link.key}).then(()=>{console.log("Thanks for sharing!")}).catch(console.error):(console.log({title:a.info.title,text:a.info.msg,url:location.origin+"?xlink="+a.link.key}),alert("Not implemented for desktop!"))},error:a=>{this.progress.mode="determine",this.progress.color="warn"},complete:()=>{console.log("complete")}})}else this.openDialog(e)}openDialog(e){var o=this.dialog.open(this.actions[e].component,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{value:this.value,url:this.url}});o.afterClosed().subscribe(a=>{switch(this.actions[e].type){case"filter":case"add":case"attach":case"logout":break;case"edit":void 0!==a&&(this.value=a,this.comp.instance.onEnter("",this.transformService.transform(a,this.itemUrl,!1,!0)),this.panelRef.insert(this.comp.hostView))}o=null})}ngOnDestroy(){this.sub.unsubscribe()}ngOnInit(){this.sub=this.activatedRoute.data.subscribe(e=>{this.actions=e.actions})}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(t._Vd),t.Y36(x.gz),t.Y36(p.uw),t.Y36(w.D),t.Y36(C.O),t.Y36(B.o))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-panel"]],viewQuery:function(o,a){if(1&o&&t.Gf(j,7,t.s_b),2&o){let n;t.iGM(n=t.CRH())&&(a.panelRef=n.first)}},decls:5,vars:4,consts:[[3,"mode","value","color"],[1,"big_panel"],["panel",""],[1,"mat-fab-container"],["mat-mini-fab","",3,"color","click",4,"ngFor","ngForOf"],["mat-mini-fab","",3,"color","click"]],template:function(o,a){1&o&&(t._UZ(0,"mat-progress-bar",0),t.GkF(1,1,2),t.TgZ(3,"div",3),t.YNc(4,Y,3,2,"button",4),t.qZA()),2&o&&(t.Q6J("mode",a.progress.mode)("value",a.progress.value)("color",a.progress.color),t.xp6(4),t.Q6J("ngForOf",a.actions))},dependencies:[y.Hw,_.nh,b.pW,f.sg],encapsulation:2})}return i})();m(4829);class tt{constructor(r=600,e=600){const o=document.createElement("canvas");this.ctx=o.getContext("2d"),this.ctx.canvas.height=r,this.ctx.canvas.width=e}load(r,e,o=1){const a=this.ctx.canvas.width/r.naturalWidth,n=this.ctx.canvas.height/r.naturalHeight;let l;l=a>n?n:a,this.center={x:this.ctx.canvas.width/2-r.naturalWidth*l/2,y:this.ctx.canvas.height/2-r.naturalHeight*l/2};let s=new DOMMatrix;s=s.scale(l,l);let c=new DOMPoint(this.center.x+e.pos.x,this.center.y+e.pos.y).matrixTransform(s.inverse());return s=s.translate(c.x,c.y),c=new DOMPoint(this.ctx.canvas.width/2+e.pos.x,this.ctx.canvas.height/2+e.pos.y).matrixTransform(s.inverse()),s=s.translate(c.x,c.y).scale(e.scale).translate(-c.x,-c.y),c=new DOMPoint(this.ctx.canvas.width/2+e.pos.x,this.ctx.canvas.height/2+e.pos.y).matrixTransform(s.inverse()),s=s.translate(c.x,c.y).rotate(e.angle).translate(-c.x,-c.y),this.draw(r,s),this.ctx.canvas.toDataURL("image/jpeg",o)}draw(r,e){this.ctx.setTransform(e);const o=new DOMPoint(0,0).matrixTransform(e.inverse()),a=new DOMPoint(this.ctx.canvas.width,this.ctx.canvas.height).matrixTransform(e.inverse());this.ctx.clearRect(o.x,o.y,a.x-o.x,a.y-o.y),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore(),r&&this.ctx.drawImage(r,0,0)}}var et=m(7735),I=m(6593),it=m(8079);function at(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"ms-editor",10),t.NdJ("changed",function(a){t.CHM(e);const n=t.oxw();return t.KtG(n.onChange(a))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("data",e.data)}}let ot=(()=>{class i{constructor(e,o,a,n,l){this.dialogRef=e,this.data=o,this.eventBusService=a,this.httpService=n,this.domSanitizer=l,this.progress={mode:"determine",value:100,color:"primary"}}onChange(e){e.img&&(this.img=e.img),e.size&&(this.size=e.size),e.mtx&&(this.mtx=e.mtx)}ngOnInit(){}onClick(){const o=new tt(this.size.width,this.size.width).load(this.img,this.mtx,.9),a=new Blob([o],{type:"application/octet-stream"});this.progress.mode="indeterminate";const n="images"+(void 0!==this.data.value?"/"+this.data.value.name:""),l=new FormData;l.append("orig",this.file),l.append("edited",a),this.httpService.upload(n,l).subscribe({next:s=>{s.type===v.dt.UploadProgress?(this.progress.mode="determine",this.progress.value=Math.round(s.loaded/s.total*100)):s.type===v.dt.Response&&(201===s.status||200===s.status)&&this.dialogRef.close({id:s.body.name,idx:this.data.idx,mtx:this.mtx})},error:s=>{this.progress.mode="determine",this.progress.color="warn"},complete:()=>{this.progress.mode="determine"}})}selectFile(e){const o=new FileReader;o.onload=a=>{this.data.src=o.result},e.target.files[0]&&(this.file=e.target.files[0],o.readAsDataURL(e.target.files[0]))}rotate(e){this.eventBusService.rotate.emit({degree:e})}back(){this.dialogRef.close()}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(p.so),t.Y36(p.WI),t.Y36(et.Y),t.Y36(C.O),t.Y36(I.H7))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-editor"]],decls:23,vars:4,consts:[["mat-dialog-title",""],["mat-icon-button","",1,"mat-cancel",3,"click"],["mat-icon-button","",1,"mat-close",3,"click"],[3,"mode","value","color"],["mat-dialog-content","",1,"mat-dialog-img"],[3,"data","changed",4,"ngIf"],["mat-dialog-actions","","align","center"],["mat-icon-button","",3,"click"],["type","file",1,"file_button",3,"change"],["fileInput",""],[3,"data","changed"]],template:function(o,a){if(1&o){const n=t.EpF();t.TgZ(0,"h1",0)(1,"button",1),t.NdJ("click",function(){return a.back()}),t.TgZ(2,"mat-icon"),t._uU(3,"arrow_backward"),t.qZA()(),t._uU(4," \xa0 "),t.TgZ(5,"button",2),t.NdJ("click",function(){return a.onClick()}),t.TgZ(6,"mat-icon"),t._uU(7,"done"),t.qZA()()(),t._UZ(8,"mat-progress-bar",3),t.TgZ(9,"div",4),t.YNc(10,at,1,1,"ms-editor",5),t.qZA(),t.TgZ(11,"div",6)(12,"button",7),t.NdJ("click",function(){return a.rotate(-90)}),t.TgZ(13,"mat-icon"),t._uU(14,"rotate_left"),t.qZA()(),t.TgZ(15,"button",7),t.NdJ("click",function(){t.CHM(n);const s=t.MAs(19);return t.KtG(s.click())}),t.TgZ(16,"mat-icon"),t._uU(17,"image_search"),t.qZA()(),t.TgZ(18,"input",8,9),t.NdJ("change",function(s){return a.selectFile(s)}),t.qZA(),t.TgZ(20,"button",7),t.NdJ("click",function(){return a.rotate(90)}),t.TgZ(21,"mat-icon"),t._uU(22,"rotate_right"),t.qZA()()()}2&o&&(t.xp6(8),t.Q6J("mode",a.progress.mode)("value",a.progress.value)("color",a.progress.color),t.xp6(2),t.Q6J("ngIf",a.data))},dependencies:[it.H,y.Hw,p.uh,p.xY,p.H8,_.RK,b.pW,f.O5],encapsulation:2})}return i})();var N=m(4240),E=m(8034),S=m(3305),Z=m(3680),M=m(2202),nt=m(2599),R=m(5195),T=m(9157),A=m(7466),rt=m(8525),lt=m(2032);const st=["voiceObj"];function mt(i,r){if(1&i&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.viewValue," ")}}function ct(i,r){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"First name is required!"),t.qZA())}function dt(i,r){if(1&i&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.viewValue," ")}}function pt(i,r){if(1&i&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.viewValue)}}function ut(i,r){if(1&i&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.viewValue)}}function ft(i,r){if(1&i&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.viewValue)}}function gt(i,r){if(1&i&&t._UZ(0,"img",38),2&i){const e=t.oxw().index,o=t.oxw();t.Q6J("src",o.images[e],t.LSH)}}function ht(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"mat-card",36),t.NdJ("click",function(){const n=t.CHM(e).index,l=t.oxw();return t.KtG(l.openDialog(n))}),t.YNc(1,gt,1,1,"img",37),t.qZA()}if(2&i){const e=r.index,o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.images&&o.images.length>e)}}const D=function(i){return{color:i}};let vt=(()=>{class i{constructor(e,o,a,n,l,s,c,g){this.fb=e,this.dialogRef=o,this.data=a,this.dialog=n,this.dataService=l,this.navService=s,this.httpService=c,this.domSanitizer=g,this.progress={mode:"determine",value:100,color:"primary"},this.isPlay=!1,this.isRecord=!1,this.recordPos=0,this.playPos=0,this.playLimit=1e4,this.professions=this.dataService.professions,this.physiques=this.dataService.physiques,this.religions=this.dataService.religions,this.languages=this.dataService.languages,this.statuses=this.dataService.statuses,this.data=a.value.profile,this.url=a.url}ngOnInit(){this.data.images=this.data.images?this.data.images:[],this.formGroup=this.fb.group({data:this.fb.group({firstName:[this.data.firstName,d.kI.required],gender:[this.data.gender],birthday:[new Date(this.data.birthday),[d.kI.required]],smoker:[this.data.smoker],marital:[this.data.marital],hasChild:[this.data.hasChild],height:[this.data.height],physique:[this.data.physique],languages:[[...this.data.languages?this.data.languages:[]]],religion:[this.data.religion],profession:[this.data.profession],status:[void 0!==this.data.status?this.data.status:"I"]}),images:[[...this.data.images],[d.kI.required,d.kI.minLength(3)]],voice:[this.data.voice]}),this.images=this.data.images.map(e=>location.origin+"/backend"+this.url+"/images/"+e.name),this.data.voice&&(this.voiceUrl=location.origin+"/backend"+this.url+"/voice/"+this.data.voice)}onHeight(e){this.data.height=e.target.value}numSequence(e){return Array(e)}noCache(e){return e+"?"+Date.now()}openDialog(e){var o=this.dialog.open(ot,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{idx:e,src:void 0!==this.images[e]?this.images[e].split("?")[0]+"_orig":this.images[e],value:this.formGroup.controls.images.value[e]}});o.afterClosed().subscribe(a=>{if(void 0!==a){const n=this.formGroup.controls.images.value;n[a.idx]={name:a.id,mtx:a.mtx},this.formGroup.controls.images.setValue(n),this.data.images[a.idx]=n[a.idx],this.images=this.data.images.map(l=>location.origin+"/backend"+this.url+"/images/"+l.name+"?"+Date.now())}o=null})}onClick(){if(this.formGroup.valid){this.progress.mode="indeterminate";let e=this.formGroup.getRawValue();e.data.position=this.navService.pos,e.data.images=e.images;const o=new FormData,a=new Blob([JSON.stringify(e.data)],{type:"application/json"});o.append("profile",a),void 0!==this.voiceData&&o.append("voice",this.voiceData),this.httpService.save(this.url,o).subscribe({next:n=>{this.dialogRef.close(n)},error:n=>{this.progress.mode="determine",this.progress.color="warn"},complete:()=>{this.progress.mode="determine"}})}}back(){this.dialogRef.close()}record(){this.isRecord||navigator.mediaDevices.getUserMedia({audio:!0}).then(e=>{const o=[],a=new MediaRecorder(e);a.ondataavailable=n=>{if(o.push(n.data),"inactive"===a.state){const l=new Blob(o,{type:"audio/webm"});this.voiceData=l,this.voiceUrl=this.domSanitizer.bypassSecurityTrustUrl(URL.createObjectURL(l))}},a.start(),this.isRecord=!0,this.interval=setInterval(()=>{this.recordPos++},500),setTimeout(()=>{setTimeout(()=>{this.recordPos=0,this.isRecord=!1},500),clearInterval(this.interval),a.stop()},1e4)}).catch(console.error)}play(){void 0===this.voiceObj||this.isPlay||(this.isPlay=!0,this.voiceObj.nativeElement.load(),this.voiceObj.nativeElement[this.isPlay?"play":"pause"]())}updateTime(e){this.playPos=1e3*this.voiceObj.nativeElement.currentTime}ended(e){this.isPlay=!1,this.playPos=0}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(d.QS),t.Y36(p.so),t.Y36(p.WI),t.Y36(p.uw),t.Y36(w.D),t.Y36(N.f),t.Y36(C.O),t.Y36(I.H7))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-profile"]],viewQuery:function(o,a){if(1&o&&t.Gf(st,7),2&o){let n;t.iGM(n=t.CRH())&&(a.voiceObj=n.first)}},decls:109,vars:47,consts:[["mat-dialog-title",""],["mat-icon-button","",1,"mat-cancel",3,"click"],["mat-icon-button","",1,"mat-close",3,"click"],[3,"mode","value","color"],["mat-dialog-content","",1,"mat-form"],["default","",3,"formGroup"],["formGroupName","data"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],["matInput","",3,"formControlName"],[4,"ngIf"],["matInput","",3,"matDatepicker","formControlName"],["matSuffix","",3,"for"],["picker",""],["value","m"],["value","w"],["value","s"],["value","t"],["labelPosition","before",3,"formControlName"],["legend-right",""],["min","40","max","250"],["matSliderThumb","",3,"formControlName","input"],["multiple","",3,"formControlName"],["matRipple","","default","",3,"click",4,"ngFor","ngForOf"],[1,"voice"],["mat-button","","matRipple","",2,"margin-left","auto","border-radius","50%",3,"click"],["viewBox","0 0 24 24",1,"chart"],["transform","rotate(-90 12 12)"],["r","10","cy","12","cx","12",1,"pos"],["r","10","cy","12","cx","12",1,"buff"],["mat-rate","",3,"ngStyle"],["mat-button","","matRipple","",2,"margin-right","auto","border-radius","50%",3,"click"],["preload","none",3,"timeupdate","ended"],["voiceObj",""],["type","audio/ogg",3,"src"],[3,"value"],["matRipple","","default","",3,"click"],["mat-card-image","",3,"src",4,"ngIf"],["mat-card-image","",3,"src"]],template:function(o,a){if(1&o&&(t.TgZ(0,"h1",0)(1,"button",1),t.NdJ("click",function(){return a.back()}),t.TgZ(2,"mat-icon"),t._uU(3,"arrow_backward"),t.qZA()(),t._uU(4," \xa0 "),t.TgZ(5,"button",2),t.NdJ("click",function(){return a.onClick()}),t.TgZ(6,"mat-icon"),t._uU(7,"done"),t.qZA()()(),t._UZ(8,"mat-progress-bar",3),t.TgZ(9,"div",4)(10,"form",5)(11,"mat-accordion")(12,"mat-expansion-panel",6)(13,"mat-expansion-panel-header")(14,"mat-panel-title"),t._uU(15,"Personal data"),t.qZA()(),t.TgZ(16,"mat-form-field")(17,"mat-label"),t._uU(18,"Status"),t.qZA(),t.TgZ(19,"mat-select",7),t.YNc(20,mt,2,2,"mat-option",8),t.qZA()(),t.TgZ(21,"mat-form-field")(22,"mat-label"),t._uU(23,"Enter your first name"),t.qZA(),t._UZ(24,"input",9),t.YNc(25,ct,2,0,"mat-error",10),t.qZA(),t.TgZ(26,"mat-form-field")(27,"mat-label"),t._uU(28,"Choose your birthday"),t.qZA(),t._UZ(29,"input",11)(30,"mat-datepicker-toggle",12)(31,"mat-datepicker",null,13),t.qZA(),t.TgZ(33,"fieldset")(34,"legend"),t._uU(35,"Gender"),t.qZA(),t.TgZ(36,"mat-radio-group",7)(37,"mat-radio-button",14),t._uU(38,"Man"),t.qZA(),t.TgZ(39,"mat-radio-button",15),t._uU(40,"Woman"),t.qZA()()(),t.TgZ(41,"fieldset")(42,"legend"),t._uU(43,"Marital Status"),t.qZA(),t.TgZ(44,"mat-radio-group",7)(45,"mat-radio-button",16),t._uU(46,"Single"),t.qZA(),t.TgZ(47,"mat-radio-button",17),t._uU(48,"Taken"),t.qZA()()(),t.TgZ(49,"mat-slide-toggle",18),t._uU(50,"Smoker"),t.qZA(),t.TgZ(51,"mat-slide-toggle",18),t._uU(52,"Child"),t.qZA(),t.TgZ(53,"fieldset")(54,"legend"),t._uU(55,"Height"),t.qZA(),t.TgZ(56,"div",19),t._uU(57),t.qZA(),t.TgZ(58,"mat-slider",20)(59,"input",21),t.NdJ("input",function(l){return a.onHeight(l)}),t.qZA()()(),t.TgZ(60,"mat-form-field")(61,"mat-label"),t._uU(62,"Physique"),t.qZA(),t.TgZ(63,"mat-select",7),t.YNc(64,dt,2,2,"mat-option",8),t.qZA()(),t.TgZ(65,"mat-form-field")(66,"mat-label"),t._uU(67,"Languages"),t.qZA(),t.TgZ(68,"mat-select",22),t.YNc(69,pt,2,2,"mat-option",8),t.qZA()(),t.TgZ(70,"mat-form-field")(71,"mat-label"),t._uU(72,"Religion"),t.qZA(),t.TgZ(73,"mat-select",7),t.YNc(74,ut,2,2,"mat-option",8),t.qZA()(),t.TgZ(75,"mat-form-field")(76,"mat-label"),t._uU(77,"Profession"),t.qZA(),t.TgZ(78,"mat-select",7),t.YNc(79,ft,2,2,"mat-option",8),t.qZA()()(),t.TgZ(80,"mat-expansion-panel")(81,"mat-expansion-panel-header")(82,"mat-panel-title"),t._uU(83,"Images"),t.qZA()(),t.YNc(84,ht,2,1,"mat-card",23),t.qZA(),t.TgZ(85,"mat-expansion-panel")(86,"mat-expansion-panel-header")(87,"mat-panel-title"),t._uU(88,"Voice"),t.qZA()(),t.TgZ(89,"fieldset",24)(90,"legend"),t._uU(91,"Voice"),t.qZA(),t.TgZ(92,"div",25),t.NdJ("click",function(){return a.record()}),t.O4$(),t.TgZ(93,"svg",26)(94,"g",27),t._UZ(95,"circle",28)(96,"circle",29),t.qZA()(),t.kcU(),t.TgZ(97,"mat-icon",30),t._uU(98),t.qZA()(),t.TgZ(99,"div",31),t.NdJ("click",function(){return a.play()}),t.O4$(),t.TgZ(100,"svg",26)(101,"g",27),t._UZ(102,"circle",28)(103,"circle",29),t.qZA()(),t.kcU(),t.TgZ(104,"mat-icon",30),t._uU(105),t.qZA()(),t.TgZ(106,"audio",32,33),t.NdJ("timeupdate",function(l){return a.updateTime(l)})("ended",function(l){return a.ended(l)}),t._UZ(108,"source",34),t.qZA()()()()()()),2&o){const n=t.MAs(32);t.xp6(5),t.Udp("background-color",a.formGroup.valid?"yellowgreen":"#f44336"),t.xp6(3),t.Q6J("mode",a.progress.mode)("value",a.progress.value)("color",a.progress.color),t.xp6(2),t.Q6J("formGroup",a.formGroup),t.xp6(3),t.Udp("background-color",a.formGroup.controls.data.valid?"yellowgreen":"#f44336"),t.xp6(6),t.Q6J("formControlName","status"),t.xp6(1),t.Q6J("ngForOf",a.statuses),t.xp6(4),t.Q6J("formControlName","firstName"),t.xp6(1),t.Q6J("ngIf",a.formGroup.controls.data.get("firstName").invalid),t.xp6(4),t.Q6J("matDatepicker",n)("formControlName","birthday"),t.xp6(1),t.Q6J("for",n),t.xp6(6),t.Q6J("formControlName","gender"),t.xp6(8),t.Q6J("formControlName","marital"),t.xp6(5),t.Q6J("formControlName","smoker"),t.xp6(2),t.Q6J("formControlName","hasChild"),t.xp6(6),t.Oqu(a.data.height),t.xp6(2),t.Q6J("formControlName","height"),t.xp6(4),t.Q6J("formControlName","physique"),t.xp6(1),t.Q6J("ngForOf",a.physiques),t.xp6(4),t.Q6J("formControlName","languages"),t.xp6(1),t.Q6J("ngForOf",a.languages),t.xp6(4),t.Q6J("formControlName","religion"),t.xp6(1),t.Q6J("ngForOf",a.religions),t.xp6(4),t.Q6J("formControlName","profession"),t.xp6(1),t.Q6J("ngForOf",a.professions),t.xp6(2),t.Udp("background-color",a.formGroup.controls.images.valid?"yellowgreen":"#f44336"),t.xp6(3),t.Q6J("ngForOf",a.numSequence(3)),t.xp6(2),t.Udp("background-color",a.formGroup.controls.voice.valid?"yellowgreen":"#f44336"),t.xp6(7),t.Akn("--pos:"+a.recordPos+";--buff:0;--limit: 10;width:30px;"),t.xp6(4),t.Q6J("ngStyle",t.VKq(43,D,a.isPlay?"gray":"black")),t.xp6(1),t.Oqu(a.isRecord?"stop":"mic"),t.xp6(2),t.Akn("--pos:"+a.playPos+";--buff:0;--limit:"+a.playLimit+";width:30px;"),t.xp6(4),t.Q6J("ngStyle",t.VKq(45,D,a.isRecord?"gray":"black")),t.xp6(1),t.Oqu(a.isPlay?"stop":"play_arrow"),t.xp6(3),t.Q6J("src",a.voiceUrl,t.LSH)}},dependencies:[y.Hw,E.Mq,E.hl,E.nW,S.pp,S.ib,S.yz,S.yK,Z.wG,p.uh,p.xY,M.pH,M.$5,nt.Rr,R.a8,R.G2,T.KE,T.hX,T.TO,T.R9,A.VQ,A.U0,rt.gD,Z.ey,_.RK,b.pW,lt.Nt,f.sg,f.O5,f.PC,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,d.x0],encapsulation:2})}return i})();var _t=m(7142),xt=m(553);function Ct(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"form",4)(1,"div",5)(2,"div",6)(3,"button",7),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.logout())}),t._uU(4," Logout "),t.qZA()()()()}if(2&i){const e=t.oxw();t.Q6J("formGroup",e.formGroup)}}const bt=[{path:"",redirectTo:"activity",pathMatch:"full"},{path:"activity",data:{reuse:!0,icon:"notifications"},children:[{path:"",redirectTo:"channels",pathMatch:"full"},{path:"channels",component:u.Eg,data:{reuse:!0,actions:[],event:!0,animation:"One",type:"chat"}},{path:"channels/:id",data:{dialog:!0},children:[{path:"",redirectTo:"items",pathMatch:"full"},{path:"items",component:u.Eg,data:{reuse:!0,actions:[],animation:"One1",type:"chat",mqtt:!0}}]}]},{path:"games",data:{reuse:!0,icon:"favorite"},children:[{path:"",redirectTo:"rate_none",pathMatch:"full"},{path:"rate_none",component:u.Eg,data:{reuse:!0,icon:"rate_ext_new",double:!0,group:"dist",filter:!0}},{path:"rate_double/:id",data:{icon:"insert_invitation",dialog:!0},children:[{path:"",redirectTo:"none",pathMatch:"full"},{path:"none",component:u.Eg,data:{reuse:!0,icon:"screen_share",animation:"Four"}},{path:"rated",component:u.Eg,data:{reuse:!0,icon:"rate_ext"}}]},{path:"rate_give",component:u.Eg,data:{reuse:!0,icon:"rate_ext_give",double:!0}},{path:"rate_receive",component:u.Eg,data:{reuse:!0,icon:"rate_ext_receive",double:!0}},{path:"rate_both",component:u.Eg,data:{reuse:!0,icon:"rate_ext_both",double:!0}}]},{path:"user",data:{reuse:!0,icon:"person"},children:[{path:"",redirectTo:"profile",pathMatch:"full"},{path:"profile",component:L,data:{reuse:!0,actions:[{component:(()=>{class i{constructor(e,o,a,n,l,s){this.router=e,this.fb=o,this.dialogRef=a,this.dialog=n,this.httpService=l,this.navService=s,this.progress={mode:"determine",value:0,color:"primary"},this.groups=[],this.url="/user"}ngOnInit(){const e=new v.LE;this.httpService.get(this.url,e).subscribe({next:o=>{this.init(o)},error:o=>{this.progress.mode="determine",this.progress.color="warn"},complete:()=>{console.log("complete")}})}onSelect(e){const o=this.groups.findIndex(a=>a.value===e.value);this.selected=this.groups[o]}init(e){this.current=e.user.group,this.formGroup=this.fb.group({data:this.fb.group({key:[e.user.group,d.kI.required]})})}leave(){this.openConfirmation("Would you like to leave the "+this.selected.viewValue+" group!")}openConfirmation(e){this.dialog.open(u.BE,{data:{msg:e,btn:"Yes"}}).afterClosed().subscribe(a=>{if(!0===a){const n=new v.LE;this.httpService.save(this.url+"/groups/"+this.selected.value+"/leave",n).subscribe({next:l=>{this.init(l)},error:l=>{this.progress.mode="determine",this.progress.color="warn"},complete:()=>{console.log("complete")}})}})}onClick(){if(this.formGroup.valid){this.progress.mode="indeterminate";const e=this.formGroup.getRawValue(),o=new FormData,a=new Blob([JSON.stringify(e.data)],{type:"application/json"});o.append("group",a),this.httpService.save(this.url,o).subscribe({next:n=>{const l=n.user.group,s=n.groups;let c;for(const h of s)if(h.group.key===l){c=xt.N.groupTypes[h.group.type],this.navService.groupName=h.group.name[0];break}const g={};for(const h of n.likes)g[c+"/"+h.root]=h.value;this.navService.notif=g,this.router.navigate(void 0===n.user.profile||"I"===n.user.profile.status?[c+"/user"]:[c]),this.dialogRef.close(n)},error:n=>{this.progress.mode="determine",this.progress.color="warn"},complete:()=>{this.progress.mode="determine"}})}}back(){this.dialogRef.close()}logout(){_t.Z.auth().signOut().then(()=>{console.log("logout"),this.navService.reset.next(),this.back()}).catch(e=>{})}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(x.F0),t.Y36(d.QS),t.Y36(p.so),t.Y36(p.uw),t.Y36(C.O),t.Y36(N.f))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-settings"]],decls:7,vars:4,consts:[["mat-dialog-title",""],["mat-icon-button","",1,"mat-cancel",3,"click"],[3,"mode","value","color"],["default","",3,"formGroup",4,"ngIf"],["default","",3,"formGroup"],["formGroupName","data"],["button-row",""],["mat-raised-button","","color","accent",3,"click"]],template:function(o,a){1&o&&(t.TgZ(0,"h1",0)(1,"button",1),t.NdJ("click",function(){return a.back()}),t.TgZ(2,"mat-icon"),t._uU(3,"arrow_backward"),t.qZA()(),t._uU(4,"\xa0\n"),t.qZA(),t._UZ(5,"mat-progress-bar",2),t.YNc(6,Ct,5,1,"form",3)),2&o&&(t.xp6(5),t.Q6J("mode",a.progress.mode)("value",a.progress.value)("color",a.progress.color),t.xp6(1),t.Q6J("ngIf",a.formGroup))},dependencies:[y.Hw,p.uh,_.lW,_.RK,b.pW,f.O5,d._Y,d.JL,d.sg,d.x0],encapsulation:2})}return i})(),type:"logout",icon:"logout",color:"warn"},{component:vt,type:"edit",icon:"edit"}]}}]}];let St=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[x.Bz.forChild(bt),x.Bz]})}return i})(),Tt=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({providers:[f.uU],imports:[V.v,f.ez,d.u5,d.UX,St]})}return i})()}}]);